<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>START 페이지</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjs@12.4.2/lib/browser/math.js"></script>

  </head>
  <body>

    <header class="bg-blue-500 text-white p-6 text-center">
      <h1 class="text-4xl font-bold">환영합니다! 계산기</h1>
    </header>

    <main class="container mx-auto mt-8 p-4">

      <!-- <div class="bg-gray-100 p-6 rounded-lg shadow-md">
        <h2 class="text-2xl font-semibold mb-4">소개</h2>
        <p class="text-gray-700">계산기 페이지 입니다.</p>
      </div> -->

      <div class="space-y-4 p-4 max-w-lg mx-auto">
        <!-- <div class="border border-blue-300"> -->
        <div>
          <label for="calculator-input" class="block text-sm font-medium text-gray-700 mb-1">계산식</label>
          <input
            type="text"
            id="calculator-input"
            name="calculator-input"
            placeholder="예: 10 * 5 + 2"
            class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200"
          >
        </div>
      
        <div>
          <label for="result-output" class="block text-sm font-medium text-gray-700 mb-1">결과</label>
          <textarea
            id="result-output"
            name="result-output"
            rows="4"
            readonly
            class="w-full p-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 text-gray-600 cursor-not-allowed"
          ></textarea>
        </div>
      </div>

      <div class="space-y-4 p-4 max-w-lg mx-auto">
  
        <div class="flex gap-2 mt-4">


          <div class="flex-grow grid grid-cols-3 gap-2">
            <button data-value="7" class="p-4 bg-white hover:bg-gray-100 rounded-md shadow-sm font-bold text-lg text-gray-900">7</button>
            <button data-value="8" class="p-4 bg-white hover:bg-gray-100 rounded-md shadow-sm font-bold text-lg text-gray-900">8</button>
            <button data-value="9" class="p-4 bg-white hover:bg-gray-100 rounded-md shadow-sm font-bold text-lg text-gray-900">9</button>

            <button data-value="4" class="p-4 bg-white hover:bg-gray-100 rounded-md shadow-sm font-bold text-lg text-gray-900">4</button>
            <button data-value="5" class="p-4 bg-white hover:bg-gray-100 rounded-md shadow-sm font-bold text-lg text-gray-900">5</button>
            <button data-value="6" class="p-4 bg-white hover:bg-gray-100 rounded-md shadow-sm font-bold text-lg text-gray-900">6</button>

            <button data-value="1" class="p-4 bg-white hover:bg-gray-100 rounded-md shadow-sm font-bold text-lg text-gray-900">1</button>
            <button data-value="2" class="p-4 bg-white hover:bg-gray-100 rounded-md shadow-sm font-bold text-lg text-gray-900">2</button>
            <button data-value="3" class="p-4 bg-white hover:bg-gray-100 rounded-md shadow-sm font-bold text-lg text-gray-900">3</button>
            
            <button data-value="." class="p-4 bg-white hover:bg-gray-100 rounded-md shadow-sm font-bold text-lg text-gray-900">.</button>
            <button data-value="0" class="p-4 bg-white hover:bg-gray-100 rounded-md shadow-sm font-bold text-lg text-gray-900">0</button>
            <button data-value="00" class="p-4 bg-white hover:bg-gray-100 rounded-md shadow-sm font-bold text-lg text-gray-900">00</button>
            <button data-value="000" class="p-4 bg-white hover:bg-gray-100 rounded-md shadow-sm font-bold text-lg text-gray-900">000</button>
          </div>
    
          <div class="flex-grow grid grid-cols-2 gap-2">
            <button data-value="(" class="p-4 bg-orange-500 hover:bg-orange-600 rounded-md shadow-sm font-bold text-xl text-white">(</button>
            <button data-value=")" class="p-4 bg-orange-500 hover:bg-orange-600 rounded-md shadow-sm font-bold text-xl text-white">)</button>
            <button data-value="%" class="p-4 bg-orange-500 hover:bg-orange-600 rounded-md shadow-sm font-bold text-xl text-white">%</button>
            <button data-value="÷" class="p-4 bg-orange-500 hover:bg-orange-600 rounded-md shadow-sm font-bold text-xl text-white">÷</button>
            <button data-value="×" class="p-4 bg-orange-500 hover:bg-orange-600 rounded-md shadow-sm font-bold text-xl text-white">×</button>
            <button data-value="-" class="p-4 bg-orange-500 hover:bg-orange-600 rounded-md shadow-sm font-bold text-xl text-white">-</button>
            <button data-value="+" class="p-4 bg-orange-500 hover:bg-orange-600 rounded-md shadow-sm font-bold text-xl text-white">+</button>
            <button data-value="=" class="p-4 bg-blue-500 hover:bg-blue-600 rounded-md shadow-sm font-bold text-2xl text-white">=</button>
          </div>
        </div>
      </div>

      <div class="space-y-2 p-4 max-w-lg mx-auto bg-gray-50 rounded-lg shadow-xl">

        <div class="grid grid-cols-5 gap-2">
          <button data-value="AC" class="p-2 bg-red-500 hover:bg-red-600 rounded-md shadow-sm font-bold text-sm text-white">AC</button>
          <button data-value="CE" class="p-2 bg-red-500 hover:bg-red-600 rounded-md shadow-sm font-bold text-sm text-white hidden">CE</button>
          <button data-value="C" class="p-2 bg-red-500 hover:bg-red-600 rounded-md shadow-sm font-bold text-sm text-white">C</button>
          <button data-value="+/-" class="p-2 bg-gray-200 hover:bg-gray-300 rounded-md shadow-sm font-bold text-sm text-gray-800 hidden">+/-</button>
          <button data-value="GT" class="p-2 bg-gray-200 hover:bg-gray-300 rounded-md shadow-sm font-bold text-sm text-gray-800 hidden">GT</button>
        </div>
        
        <div class="grid grid-cols-4 gap-2">
          <button data-value="MC" class="p-2 bg-gray-200 hover:bg-gray-300 rounded-md shadow-sm font-bold text-sm text-gray-800 hidden">MC</button>
          <button data-value="MR" class="p-2 bg-gray-200 hover:bg-gray-300 rounded-md shadow-sm font-bold text-sm text-gray-800 hidden">MR</button>
          <button data-value="M+" class="p-2 bg-green-500 hover:bg-green-600 rounded-md shadow-sm font-bold text-sm text-white hidden">M+</button>
          <button data-value="M-" class="p-2 bg-green-500 hover:bg-green-600 rounded-md shadow-sm font-bold text-sm text-white hidden">M-</button>
        </div>
      </div>
    </main>

    <footer class="bg-gray-800 text-white p-4 mt-8 text-center">
      <p>&copy; 2025 START 페이지</p>
    </footer>

    <audio id="soundEffect" src="https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoic3VwZXJjZWxsXC9maWxlXC9tOHhmREpvcnVYUUNURm5kUlZVai5vZ2cifQ:supercell:gLfxd34G1ZpUaPNbikkcLPEeTF_XP8z78kDY7e3_DYU?width={width}&format=mp3"></audio>

    <script>
      const calculatorInput = document.getElementById('calculator-input');
      const resultOutput = document.getElementById('result-output');
      const buttons = document.querySelectorAll('button[data-value]');

      const soundEffect = document.getElementById('soundEffect');

      function calculateExpression() {
        const expression = calculatorInput.value;
        const sanitizedExpression = expression
          .replace(/÷/g, '/')  // ÷를 /로 변환
          .replace(/×/g, '*'); // ×도 *로 변환 (사용자가 입력할 수 있으므로 함께 처리하는 것이 좋습니다)

          try {
          // 전역 객체 math를 사용하여 수식 계산
          const result = math.evaluate(sanitizedExpression);
          resultOutput.value = `계산식: ${expression}\n결과: ${result}`;
          calculatorInput.value = '';

          if (soundEffect) {
              soundEffect.currentTime = 0;
              soundEffect.play();
          }          
        } catch (error) {
          resultOutput.value = `오류: 잘못된 계산식입니다.`;
          console.error(error);
        }
      }
    
      buttons.forEach(button => {
        button.addEventListener('click', () => {
          const value = button.dataset.value;
          
          if (value === 'AC') {
            // AC 버튼: 입력 필드와 결과 필드 모두 초기화
            calculatorInput.value = '';
            resultOutput.value = '';
          } else if (value === 'C') {
            // C 버튼: 입력 필드만 초기화
            calculatorInput.value = '';
          } else if (value === '=') {
            calculateExpression(value);
          } else {
            calculatorInput.value += value;
          }
        });
      });
    
      // 엔터 키 입력 시 계산 실행 (기존 코드 유지)
      calculatorInput.addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
          event.preventDefault();
          try {
            calculateExpression(value);
          } catch (error) {
            resultOutput.value = `오류: 잘못된 계산식입니다.`;
          }
        }
      });
    </script>

  </body>
</html>
